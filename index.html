<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video User Study</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 90%;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .video-container {
            background-color: white;
            margin-bottom: 30px;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .video-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
        }
        
        video {
            width: 100%;
            /* max-width: 600px; */
            height: auto;
            display: block;
            margin: 0 auto 20px auto;
        }
        
        .questions {
            margin-bottom: 20px;
        }
        
        .question {
            background-color: #f9f9f9;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 5px;
            border-left: 4px solid #007bff;
        }
        
        .question-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
        }
        
        .options {
            display: flex;
            justify-content: center;
            gap: 30px;
        }
        
        .option {
            font-size: 16px;
            display: flex;
            align-items: center;
        }
        
        input[type="radio"] {
            margin-right: 8px;
            transform: scale(1.2);
        }
        
        .results-container {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-top: 30px;
        }
        
        .results-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
        }
        
        #results {
            width: 100%;
            height: 150px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            background-color: #f9f9f9;
            resize: vertical;
        }
    </style>
</head>
<body>
    <h1 style="text-align: center; margin-bottom: 30px;">Video User Study</h1>
    
    <div style="background-color: white; padding: 20px; margin-bottom: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
        <p><strong>Instructions:</strong></p>
        <p>You will be shown pairs of videos from two different motion editing methods. For each pair, please answer the three questions below by selecting your preference.</p>
        <p><strong>Note:</strong> Both methods receive the same input video and desired motion trajectories. Your task is to evaluate which method produces better results.</p>
        <p><strong>How to evaluate:</strong> The video edits are indicated by the change in position of the colored dots. Look at matching dots from input to output video to determine the intended edits and how well each method preserves content while achieving the desired motion changes.</p>
        <p><strong>When finished:</strong> Click the email link at the bottom of the page and it will prepare an email with your results to send.</p>
    </div>
    
    <div id="video-containers"></div>

    <div class="results-container">
        <div class="results-title">Results (JSON Format):</div>
        <textarea id="results" readonly placeholder="Results will appear here as you make selections..."></textarea>
        <p style="margin-top: 15px; font-weight: bold; color: #333;">
            Once completed, please click here to send results: <a href="#" id="emailLink">rburgert@cs.stonybrook.edu</a>
        </p>
    </div>

    <script>
        const videos = [
            "video_pairs_20/[Failure] Stop Sign Lady_copy6.mp4ATI_0097--[Seed 4370] [Failure] Stop Sign Lady_copy6.mp4",
            "video_pairs_20/Truck Before Cab_copy1.mp4ATI_0055--[Seed 5072] Truck Before Cab_copy1.mp4",
            "video_pairs_20/Truck Before Cab_copy1.mp4ATI_0040--[Seed 5072] Truck Before Cab_copy1.mp4",
            "video_pairs_20/Sora Basketball_ The ball goes into the hoop_copy3.mp4ATI_0071--[Seed 6303] Sora Basketball_ The ball goes into the hoop_copy3.mp4",
            "video_pairs_20/Shakycam.mp4ATI_0118--[Seed 9471] Shakycam.mp4",
            "video_pairs_20/Reverse Windmills.mp4ATI_0064--[Seed 9651] Reverse Windmills.mp4",
            "video_pairs_20/Move the car faster forward.mp4ATI_0099--[Seed 8917] Move the car faster forward.mp4",
            "video_pairs_20/Motorcycle Chase_ The motorcycle chases the car_copy1.mp4ATI_0074--[Seed 1579] Motorcycle Chase_ The motorcycle chases the car_copy1.mp4",
            "video_pairs_20/Kittycat Fish.mp4ATI_0071--[Seed 2] Kittycat Fish.mp4",
            "video_pairs_20/Judge_ Walk Out_copy1.mp4ATI_0032--[Seed 5176] Judge_ Walk Out_copy1.mp4",
            "video_pairs_20/Judge_ Walk Out.mp4ATI_0021--[Seed 8184] Judge_ Walk Out.mp4",
            "video_pairs_20/Judge_ Walk In From Right + Zoom_copy1.mp4ATI_0045--[Seed 5176] Judge_ Walk In From Right + Zoom_copy1.mp4",
            "video_pairs_20/Hot Air Baloons_ Slow camera, make baloons rise.mp4ATI_0089--[Seed 875] Hot Air Baloons_ Slow camera, make baloons rise.mp4",
            "video_pairs_20/City Biker.mp4ATI_0065--[Seed 9567] City Biker.mp4",
            "video_pairs_20/Cheerleader.mp4ATI_0019--[Seed 5819] Cheerleader.mp4",
            "video_pairs_20/Candle Grab StopCam.mp4ATI_0065--[Seed 4764] Candle Grab StopCam.mp4",
            "video_pairs_20/Boat_ Move Test.mp4ATI_0004--[Seed 6227] Boat_ Move Test.mp4",
            "video_pairs_20/Blacks Freeze Camera_copy.mp4ATI_0038--[Seed 1515] Blacks Freeze Camera_copy.mp4",
            "video_pairs_20/Blacks Freeze Camera.mp4ATI_0000--[Seed 8464] Blacks Freeze Camera.mp4",
            "video_pairs_20/Bichon + Corgi _ Corgi Stay Behind.mp4ATI_0053--[Seed 9995] Bichon + Corgi _ Corgi Stay Behind.mp4",
            "video_pairs_20/Bichon + Corgi _ Bichon Stay Behind_copy3.mp4ATI_0025--[Seed 7945] Bichon + Corgi _ Bichon Stay Behind_copy3.mp4",
        ];
        
        let results = {};
        
        function updateResults() {
            const resultsTextarea = document.getElementById('results');
            const jsonData = JSON.stringify(results, null, 2);
            resultsTextarea.value = jsonData;
            
            // Update email link with JSON data
            const emailLink = document.getElementById('emailLink');
            const subject = 'Video User Study Results';
            const body = `Here are my user study results:\n\n${jsonData}`;
            emailLink.href = `mailto:rburgert@cs.stonybrook.edu?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
        }
        
        function createVideoContainer(videoPath, index) {
            const container = document.createElement('div');
            container.className = 'video-container';
            
            const title = document.createElement('div');
            title.className = 'video-title';
            title.textContent = `Video Pair ${index}`;
            
            const video = document.createElement('video');
            video.src = videoPath;
            video.controls = true;
            video.autoplay = true;
            video.muted = true; // Required for autoplay in most browsers
            video.loop = true;
            
            const questionsContainer = document.createElement('div');
            questionsContainer.className = 'questions';
            
            const questions = [
                "Q1: Which video better preserves the input video's content?",
                "Q2: Which video better reflects the desired motion?",
                "Q3: Which video is overall a better edit of the input video?"
            ];
            
            questions.forEach((questionText, qIndex) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                
                const questionTitle = document.createElement('div');
                questionTitle.className = 'question-title';
                questionTitle.textContent = questionText;
                
                const options = document.createElement('div');
                options.className = 'options';
                
                const optionOurs = document.createElement('label');
                optionOurs.className = 'option';
                const radioOurs = document.createElement('input');
                radioOurs.type = 'radio';
                radioOurs.name = `video_${index}_q${qIndex}`;
                radioOurs.value = 'A';
                radioOurs.addEventListener('change', () => {
                    if (radioOurs.checked) {
                        if (!results[index]) results[index] = {};
                        results[index][`q${qIndex + 1}`] = 'A';
                        updateResults();
                    }
                });
                optionOurs.appendChild(radioOurs);
                optionOurs.appendChild(document.createTextNode('A'));
                
                const optionATI = document.createElement('label');
                optionATI.className = 'option';
                const radioATI = document.createElement('input');
                radioATI.type = 'radio';
                radioATI.name = `video_${index}_q${qIndex}`;
                radioATI.value = 'B';
                radioATI.addEventListener('change', () => {
                    if (radioATI.checked) {
                        if (!results[index]) results[index] = {};
                        results[index][`q${qIndex + 1}`] = 'B';
                        updateResults();
                    }
                });
                optionATI.appendChild(radioATI);
                optionATI.appendChild(document.createTextNode('B'));
                
                options.appendChild(optionOurs);
                options.appendChild(optionATI);
                
                questionDiv.appendChild(questionTitle);
                questionDiv.appendChild(options);
                questionsContainer.appendChild(questionDiv);
            });
            
            container.appendChild(title);
            container.appendChild(video);
            container.appendChild(questionsContainer);
            
            return container;
        }
        
        function initializeStudy() {
            const videoContainers = document.getElementById('video-containers');
            
            videos.forEach((videoPath, index) => {
                const container = createVideoContainer(videoPath, index);
                videoContainers.appendChild(container);
            });
            
            updateResults();
        }
        
        // Initialize the study when the page loads
        document.addEventListener('DOMContentLoaded', initializeStudy);
    </script>
</body>
</html>
